<div class="row">
  <button class="btn btn-success" ng-click="$ctrl.onBack()">{{'BACK_BUTTON' | translate}}</button>
  <div class="container">


    <div class="team-register-panel">
      <div class="header">
        <h1>Mead Head Show</h1>
        <h2>{{'REGISTRATION_FORM_TITLE' | translate}} {{$ctrl.gameDate}}</h2>
      </div>
      <form ng-submit="$ctrl.saveRequest()" name="request" class="request-team-form">
        <div class="autocomplete-form">
          <label class="request-description"><b>{{'TEAM_NAME_LABEL' | translate}}</b></label>
          <div angucomplete-alt id="team-name"
               placeholder="{{'TEAM_NAME_PLACEHOLDER'|translate}}"
               pause="100"
               selected-object="$ctrl.selectedTeam"
               local-data="$ctrl.teams"
               search-fields="name"
               title-field="name"
               minlength="1"
               maxlength="50"
               input-changed="$ctrl.getTeamName"
               input-class="form-control form-control-small"
               field-required="true"
               input-name="teamName">
          </div>

        </div>
        <script type="text/ng-template" id="alert.html">
          <div ng-transclude></div>
        </script>
        <div ng-if="!$ctrl.isCorrectLastDigits" uib-alert template-url="alert.html"
             class="alert-danger incorrect-last-3-digits-alert"
             role="alert">
          <button type="button" class="close" ng-click="$ctrl.hideAlert()">
            <span>Ã—</span>
            <span class="sr-only">{{'CLOSE_BUTTON'|translate}}</span>
          </button>
          <span>{{'INCORRECT_LAST_NUMBERS_ERROR'|translate}}</span>
        </div>
        <div class="captain-info">
          <div style="display: inline-block; float: left;"
               ng-class="!$ctrl.showPhoneVerifyRequest ? 'autocomplete-captain-phone-panel' : 'captain-phone-panel'">
            <div>
              <div class="captain-name-spans">
                <label for="captain-name"
                       class="control-label request-description">{{'CAPTAIN_NAME_LABEL'|translate}}</label>
                <span ng-show="request.name.$error.minlength" class="err">
                        {{'MINIMUM_3_CHARACTERS_ERROR'|translate}}
                    </span>
                <span ng-show="request.name.$error.maxlength" class="err">
                        {{'MAXIMUM_40_CHARACTERS_ERROR'|translate}}
                    </span>
              </div>
              <input id="captain-name"
                     class="form-control" placeholder="{{'CAPTAIN_NAME_PLACEHOLDER'|translate}}"
                     name="name" ng-model="$ctrl.fullName" ng-maxlength="40" minlength="3"
                     ng-model-options="{'updateOn': 'default blur','debounce': {'default': 1500,'blur': 0}}"
                     required>
            </div>
            <div>
              <div class="phone-spans">
                <label for="captain-phone" class="control-label request-description">
                  {{'PHONE_LABEL'|translate}}
                </label>
                <span ng-show="request.phone.$error.minlength" class="err">
                                {{'MINIMUM_10_CHARACTERS_ERROR'|translate}}
                            </span>
                <span ng-show="request.phone.$error.mask&&!request.phone.$error.minlength"
                      class="err">
                                {{'WRONG_FORMAT_ERROR'|translate}}
                            </span>
              </div>
              <div class="phone-panel">
                <input id="captain-phone"
                       class="form-control"
                       placeholder="(XXX)XX-XX-XXX"
                       type="text" ng-model="$ctrl.phone"
                       ng-model-options="{'updateOn': 'default blur','debounce': {'default': 1000,'blur': 0}}"
                       minlength="10"
                       maxlength="14"
                       mask="(999)99-99-999"
                       name="phone"
                       required>
              </div>
            </div>
          </div>

          <div class="vertical-line animate-show-hide animated" ng-show="$ctrl.showPhoneVerifyRequest"></div>

          <div class="autocomplete-panel animate-come-gone animated" ng-show="$ctrl.showPhoneVerifyRequest">
            <label class="control-label request-description">
              {{'ENTER_LAST_PHONE_NUMBERS_LABEL' | translate}}
            </label>
            <div class="last-digits-panel">
              <input class="form-control"
                     id="captain-phone-validation" ng-model="$ctrl.lastDigits"
                     type="tel"
                     placeholder="XXX"
                     maxlength="3">

              <button class="btn btn-danger form-control btn-cancel-autocomplete"
                      type="button"
                      ng-show="$ctrl.cancelAutocompleted"
                      ng-click="$ctrl.cancelVerifyByNumberWithReturnAutocompleteFeature()">
                {{'CANCEL_BUTTON'|translate}}
              </button>
            </div>
          </div>
        </div>

        <div class="team-size-panel">
          <label for="team-size" class="control-label request-description">{{'TEAM_SIZE_LABEL'|translate}}</label>
          <input id="team-size" ng-model="$ctrl.teamSize" class="form-control" type="number" min="2" max="15"
                 required>
        </div>
        <div class="control-panel">
          <button class="btn btn-success btn-block" type="submit"
                  ng-disabled="$ctrl.disabled||!request.phone.$valid||!$ctrl.teamName">
            {{'SUBMIT_BUTTON'|translate}}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

